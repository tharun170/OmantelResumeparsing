<div class="title-bar">
    <div class="title">
        <img src="https://i.postimg.cc/0yjGZYwP/image.png" alt="Profile" class="logo" />
    </div>
    <div class="icons">
        <span class="material-icons icon">notifications</span>
        <img src="https://i.postimg.cc/tgbrcVpx/0.jpg" alt="Profile" class="icon profile" />
    </div>
</div>
<div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="menu-item active">
            <i class="icon material-icons">work</i>
            <span>Jobs</span>
        </div>
        <div class="menu-item">
            <i class="icon material-icons">group</i>
            <span>Candidates</span>
        </div>

        <div class="menu-item">
            <i class="icon material-icons">done_all</i>
            <span>Shortlisted Candidates</span>
        </div>

        <div class="menu-item">
            <i class="icon material-icons">info</i>
            <span>About</span>
        </div>
    </div>
    <div class="modal-container">
        <!-- Modal Backdrop -->
        <div class="modal-backdrop" *ngIf="showDetails" (click)="closeModal()">
            <div class="modal-content" (click)="stopPropagation($event)">
                <div class="resume-form">
                    <h3 class="section-title">Resume Details</h3>
                    <div class="nested-section">
                        <div class="form-group">
                            <label class="key">Full Name:</label>
                            <input [(ngModel)]="resumeDetails['Full Name']" class="value input-field" />
                        </div>

                        <div class="form-group">
                            <label class="key">Email:</label>
                            <input [(ngModel)]="resumeDetails.Email" type="email" class="value input-field" />
                        </div>

                        <div class="form-group">
                            <label class="key">Phone Number:</label>
                            <input [(ngModel)]="resumeDetails['Phone Number']" type="tel" class="value input-field" />
                        </div>

                        <div class="form-group">
                            <label class="key">Location:</label>
                            <input [(ngModel)]="resumeDetails.Location" class="value input-field" />
                        </div>

                        <div class="form-group">
                            <label class="key">Summary:</label>
                            <textarea [(ngModel)]="resumeDetails.Summary" class="value input-field textarea-field"></textarea>
                        </div>
                    </div>

                    <h4 class="section-subtitle">Education</h4>
                    <div *ngFor="let edu of resumeDetails.Education; let i = index" class="nested-section">
                        <div class="form-group">
                            <label class="key">Degree:</label>
                            <input [(ngModel)]="edu.Degree" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Institution:</label>
                            <input [(ngModel)]="edu.Institution" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Location:</label>
                            <input [(ngModel)]="edu.Location" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">GPA:</label>
                            <input [(ngModel)]="edu.GPA" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Start Date:</label>
                            <input [(ngModel)]="edu.StartDate" class="value input-field" [value]="edu.StartDate || ''" />
                        </div>

                        <div class="form-group">
                            <label class="key">End Date:</label>
                            <input [(ngModel)]="edu.EndDate" class="value input-field" [value]="edu.EndDate || ''" />
                        </div>
                    </div>

                    <h4 class="section-subtitle">Work Experience</h4>
                    <div *ngFor="let work of resumeDetails['Work Experience']; let i = index" class="nested-section">
                        <div class="form-group">
                            <label class="key">Company:</label>
                            <input [(ngModel)]="work.Company" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Position:</label>
                            <input [(ngModel)]="work.Position" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Location:</label>
                            <input [(ngModel)]="work.Location" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Start Date:</label>
                            <input [(ngModel)]="work.StartDate" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">End Date:</label>
                            <input [(ngModel)]="work.EndDate" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Description:</label>
                            <!-- <div *ngFor="let desc of work.Description; let j = index"> -->
                            <textarea [(ngModel)]="work.Description" class="value input-field textarea-field"></textarea>
                            <!-- </div> -->
                        </div>
                    </div>

                    <h4 class="section-subtitle">Certifications</h4>
                    <div *ngFor="let cert of resumeDetails.Certifications; let i = index" class="nested-section">
                        <div class="form-group">
                            <label class="key">Name:</label>
                            <input [(ngModel)]="cert.Name" class="value input-field" />
                        </div>
                        <div class="form-group">
                            <label class="key">Organization:</label>
                            <input [(ngModel)]="cert.Organization" class="value input-field" />
                        </div>
                    </div>

                    <h4 class="section-subtitle">Skills</h4>
                    <div class="nested-section">
                        <div class="form-group">
                            <label class="key">Soft Skills:</label>
                            <ul class="skills-list">
                                <li *ngFor="
                    let skill of resumeDetails.Skills['Soft Skills'];
                    let i = index
                  ">
                                    <input [(ngModel)]="resumeDetails.Skills['Soft Skills'][i]" class="skill-input" />
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- Blue line separator -->
                    <hr class="blue-line" />

                    <div class="nested-section">
                        <div class="form-group">
                            <label class="key">Technical Skills:</label>
                            <ul class="skills-list">
                                <li *ngFor="
                    let skill of resumeDetails.Skills['Technical Skills'];
                    let i = index
                  ">
                                    <input [(ngModel)]="resumeDetails.Skills['Technical Skills'][i]" class="skill-input" />
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <br />

                <div class="center-container">
                    <button (click)="closeModal()" class="center-button">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="bread_bar">
            <nav class="breadcrumb">
                <ul>
                    <li><a href="# ">Omantel</a></li>
                    <li><a href="# ">Jobs</a></li>
                    <li><span>Data Engineer</span></li>
                </ul>
            </nav>
        </div>
        <br />
        <!-- Breadcrumb separator -->
        <!-- Job Details Section -->
        <div class="job-details">
            <div class="back-button" (click)="navigateBack()">
                <span class="arrow">‚Üê</span>
                <span>Back to Jobs</span>
            </div>
            <br />
            <div class="job-header">
                <h2>Data Engineer</h2>
                <!-- <button class="btn-primary-view">View Job Description</button> -->

                <!-- <button class="btn-primary">Upload Resume</button> -->
                <button class="btn-primary" [routerLink]="'/job-details-de'">
                    Upload Resume
                </button>

                <div class="file-upload" style="display: none">
                    <input type="file" (change)="onFileSelect($event)" style="display: none" #fileInput accept=".png,.jpg,.docx,.doc,.pdf" />
                    <p>Allowed file formats (max-2MB): PNG, JPG, DOCX, DOC, PDF</p>
                </div>
            </div>
            <br />
            <div class="job-info">
                <div class="info-item">üåê <span>GLAV-512618</span></div>
                <div class="info-item">üìç <span>Mumbai, India</span></div>
                <div class="info-item">‚è∞ <span>Full-time</span></div>

                <div class="info-item">
                    üè¢ <span>Oman Telecommunications Company</span>
                </div>
                <div class="info-item">üìÅ <span>IT</span></div>

                <div class="info-item">üéì <span>Permanent</span></div>
                <div class="info-item">üö´ <span>No travel required</span></div>
                <div class="info-item">üìÖ <span>28 Nov 2024</span></div>
            </div>
            <br />
            <div class="line"></div>
            <br />
            <!-- <div class="card"> -->
            <div class="candidate-card">
                <div class="header">
                    <div class="profile-info">
                        <img src="https://i.postimg.cc/wTHcKLb0/image.png" alt="Profile" class="profile-img" />
                        <h2>{{ dynamicName }}</h2>
                    </div>
                    <div class="action-buttons">
                        <button class="btn shortlist" (click)="showPopup('Shortlisted')">Shortlist</button>
                        <button class="btn reject" (click)="showPopup('Rejected')">Reject</button>
                    </div>
                    <!-- Popup -->
                    <div *ngIf="popupMessage" class="popup-container">
                        <div class="popup-content">
                            <p>{{ popupMessage }}</p>
                            <button class="close-btn" (click)="closePopup()">Close</button>
                        </div>
                    </div>
                </div>
                <div class="ai-scoring-card">
                    <div class="stats">
                        <div class="stat">
                            <p class="label">Relevance Score</p>
                            <p class="value score">{{ apiResult["Relevance Score"] }}%</p>
                        </div>
                        <div class="stat">
                            <p class="label">Propensity To Join</p>
                            <p class="value high">High</p>
                            <!-- Replace with dynamic data if available -->
                        </div>
                        <div class="stat">
                            <p class="label">Relevant Experience</p>
                            <p class="value">
                                {{ formattedExperience }}
                            </p>
                        </div>
                    </div>
                </div>
                <br />
                <div class="summary">
                    <p>
                        Based on the resume of {{ dynamicName }} for the Data Engineer role, here is a summary:
                    </p>
                    <ul>
                        <li>
                            <strong>Experience:</strong> {{ apiResult["Relevant Experience"] }}
                        </li>
                        <li><strong>Technologies:</strong> Python, SQL</li>
                        <!-- Replace with dynamic data if needed -->
                        <li><strong>Skills:</strong> Data engineering, Data analytics</li>
                        <li><strong>Certifications:</strong> Azure Data Fundamentals</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Related Jobs -->
    <div class="related-jobs">
        <h3>Related Jobs</h3>
        <ul>
            <li>
                <span>Senior Securities <br />
          Operations <br />Representative - Trade <br />Settlements</span
        >
        <p>‚Ä¢ Sur, Oman ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé‚Äé ‚Äé ‚Äé ‚Äé ‚Äé‚Äé ‚Äé ‚Äé‚Äé ‚Äé ‚Äé‚Äé‚Äé ‚Äé ‚Äé ‚Ä¢ Operations</p>
      </li>
      <li>
        <span
          >Senior Securities <br />
          Operations <br />Representative</span
        >
        <p>‚Ä¢ Salalah, Oman ‚Äé ‚Äé ‚Äé‚Äé ‚Äé ‚Äé‚Äé ‚Äé ‚Äé‚Äé ‚Äé ‚Äé ‚Ä¢ Operations</p>
      </li>
      <li>
        <span
          >Lead Securities <br />Operations <br />Representative - Trade <br />
          Settlement Securities</span
        >
        <p>‚Ä¢ Nizah, Oman ‚Äé ‚Äé ‚Äé ‚Äé‚Äé ‚Äé ‚Äé ‚Äé ‚Äé‚Äé ‚Äé‚Äé ‚Äé‚Äé ‚Äé‚Äé ‚Äé ‚Äé‚Ä¢ Operations</p>
      </li>
    </ul>
  </div>
</div>